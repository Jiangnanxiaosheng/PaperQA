# 简化版RAG系统架构设计

## 设计原则

基于测试结果和用户反馈，我们将简化系统架构，专注于最有效的组件：

1. **GLM4.5模型**：用于高质量的关键词提取和语义分析
2. **简化版文本处理器**：用于基本的文本分块和处理
3. **移除复杂依赖**：不再使用LangChain，减少依赖问题和兼容性问题

## 系统架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   C++ Core      │    │   Simple Text   │    │     GLM4.5      │
│                 │    │   Processor     │    │                 │
│ • PDF Parser    │◄──►│ • Text Chunking │◄──►│ • Keyword Ext.  │
│ • Main Program  │    │ • Basic Token.  │    │ • Semantic Anal.│
│ • RAG Engine    │    │ • Clean Text    │    │ • Q&A Support  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 执行流程

### 1. PDF解析阶段
```
PDF文件 → Python PDF解析器 → 提取文本和页面信息 → 返回JSON格式结果
```

### 2. 文本分块阶段
```
文本 → 简化版文本处理器 → 基于句子边界的智能分块 → 分块结果
```

### 3. 关键词提取阶段
```
文本 → GLM4.5 API → 高级关键词提取 → 高质量关键词列表
```

### 4. RAG集成阶段
```
分块文本 + 关键词 → 向量化 → 存入向量数据库 → RAG检索和生成
```

## 组件职责

### C++核心
- PDF解析和控制流程
- RAG引擎的核心逻辑
- 用户接口和结果展示

### 简化版文本处理器
- 基于句子边界的文本分块
- 基本文本清洗和预处理
- 不依赖复杂库，确保稳定性

### GLM4.5接口
- 高质量关键词提取
- 语义分析和理解
- 支持问答和摘要生成

## 优势

1. **简化依赖**：不再需要LangChain等复杂库
2. **提高稳定性**：减少因库版本不兼容导致的问题
3. **聚焦效果**：使用最有效的组件（GLM4.5）
4. **易于维护**：更简单的架构，更少的组件

## 实施计划

1. **简化文本处理器**：移除LangChain依赖，保留基本功能
2. **优化GLM4.5接口**：增强关键词提取和语义分析能力
3. **集成RAG系统**：添加向量化和检索功能
4. **测试验证**：确保简化后的系统功能正常

## 预期效果

- 更快的处理速度
- 更高的系统稳定性
- 更好的关键词提取质量
- 更清晰的系统架构